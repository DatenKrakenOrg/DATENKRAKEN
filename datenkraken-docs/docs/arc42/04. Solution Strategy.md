# Solution Strategy

## Technological Architecture

The system follows a hybrid architecture consisting of hardware components (Arduino) and a containerized software infrastructure, locally executed via Docker Compose. The core components are:

- **Sensor Layer**: Multiple Arduinos collect environmental data (e.g., temperature, humidity, VOC, sound) and generate timestamps using an external NTP server.
- **Communication**: The Arduinos transmit timestamped data over Wi-Fi using the MQTT protocol to a centralized MQTT broker.
- **Data Persistence**: A Python-based subscription script (in the "Subscription Container") subscribes to MQTT topics and writes data into the "bronze" layer of a TimescaleDB database.
- **Data Architecture**: The database follows the Medallion architecture with a raw bronze layer and periodically updated materialized views for the silver and gold layers.
- **Visualization**: A separate UI container runs a Streamlit-based web application that visualizes gold-layer data.

## Technology Choices and Rationale

- **Arduino (C++)**: Proven microcontroller platform with broad sensor support and simplicity.
- **Python**: Chosen for its fast prototyping capabilities and extensive libraries for scripting and data handling.
- **MQTT**: Lightweight protocol ideal for IoT communication.
- **TimescaleDB**: PostgreSQL-compatible time-series database offering strong performance and full SQL support.
- **Docker Compose**: Orchestrates modular containers, enabling fast and repeatable local development.
- **Streamlit**: Rapid frontend development framework tailored for data applications in Python.

## Development Strategy

- **Local Execution**: All containers are started locally via `docker-compose up`.
- **Versioning**: Git is used with conventional branching (`feat/`, `docs/`, etc.) and commit standards following "Conventional Commits".
- **Testing**: A code coverage goal of ≥ 75 % is defined. Integration of automated testing via GitHub Actions is **planned as an improvement**.
- **Documentation**: `mkdocs` is used to structure technical documentation in a standardized way.

## Architectural Decisions

Key architectural decisions include:

- **NTP synchronization is handled on the Arduino side** rather than edge devices to ensure accurate timestamping (ADR 1.1).
- **Subscription script is colocated with the database** within the same Docker Compose network to reduce complexity (ADR 1.2).
- **TimescaleDB + Medallion architecture** enable performant querying and clean data separation (ADR 1.3).
- **Transmission and sampling rates** are defined based on data volume and outlier mitigation (ADR 2.1 & 2.2).

## Summary

This solution strategy is built on pragmatic technology choices, modern data architecture principles, and simple local orchestration using Docker Compose. The system is optimized for clarity, maintainability, and performance while remaining accessible to the development team. Future improvements include setting up GitHub Actions for automated testing.